<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9x9 Grid Planner | GardenHub</title>
    <style>
        :root { 
            --leaf: #4f772d; --dark: #31572c; --dirt: #604d3f; 
            --grass: #aacc00; --wood: #bc8a5f; --seed: #e9c46a;
        }
        
        body { font-family: 'Segoe UI', sans-serif; background: #e9edc9; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* SEED BIN SIDEBAR */
        #sidebar {
            width: 200px; background: white; padding: 20px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1); display: flex; flex-direction: column;
        }
        .seed-card {
            background: var(--seed); padding: 10px; border-radius: 6px;
            margin-bottom: 10px; cursor: grab; font-weight: bold;
            text-align: center; border: 2px solid transparent; font-size: 0.9rem;
        }
        .seed-card:hover { border-color: var(--leaf); }

        /* GRID CANVAS */
        .main-view { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(9, 50px); /* 9 columns */
            grid-template-rows: repeat(9, 50px);    /* 9 rows */
            gap: 2px;
            background: var(--wood);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .grid-spot {
            width: 50px; height: 50px;
            background: var(--dirt);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; cursor: pointer; transition: 0.2s;
            border-radius: 2px;
        }
        .grid-spot:hover { filter: brightness(1.2); }
        .grid-spot.occupied { background: #556b2f; box-shadow: inset 0 0 5px rgba(0,0,0,0.5); }

        .controls { margin-top: 20px; }
        .btn { padding: 10px 20px; cursor: pointer; border-radius: 5px; border: none; font-weight: bold; }
    </style>
</head>
<body>

<div id="sidebar">
    <h3 style="color:var(--dark)">Seed Bin</h3>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-emoji="üçÖ" data-name="Tomato">üçÖ Tomato</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-emoji="ü•¨" data-name="Kale">ü•¨ Kale</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-emoji="ü•ï" data-name="Carrot">ü•ï Carrot</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-emoji="üå∂Ô∏è" data-name="Pepper">üå∂Ô∏è Pepper</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-emoji="üßÖ" data-name="Onion">üßÖ Onion</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-emoji="üåª" data-name="Flower">üåª Flower</div>
    
    <div style="margin-top:auto">
        <button class="btn" style="background:var(--dirt); color:white; width:100%" onclick="clearGrid()">Clear Grid</button>
        <a href="index.html" style="display:block; text-align:center; margin-top:10px; color:var(--leaf); text-decoration:none; font-weight:bold;">Dashboard</a>
    </div>
</div>

<div class="main-view">
    <h2 style="margin-bottom:10px; color:var(--dark)">9x9 Garden Plot</h2>
    <div class="grid-container" id="gardenGrid">
        </div>
    <p style="color:var(--dirt); font-size: 0.8rem; margin-top:15px;">Drag plants into a square. Refreshing will keep your layout.</p>
</div>

<script>
    const GRID_SIZE = 81; // 9x9

    // Generate the Grid
    const gridContainer = document.getElementById('gardenGrid');
    function createGrid() {
        const savedLayout = JSON.parse(localStorage.getItem('gardenGridLayout')) || {};
        
        for (let i = 0; i < GRID_SIZE; i++) {
            const spot = document.createElement('div');
            spot.classList.add('grid-spot');
            spot.id = `spot-${i}`;
            
            // Allow Drop
            spot.ondragover = (e) => e.preventDefault();
            spot.ondrop = (e) => drop(e, i);
            
            // Fill if data exists
            if (savedLayout[i]) {
                spot.innerText = savedLayout[i].emoji;
                spot.classList.add('occupied');
                spot.title = savedLayout[i].name;
            }
            
            gridContainer.appendChild(spot);
        }
    }

    function drag(ev) {
        ev.dataTransfer.setData("emoji", ev.target.getAttribute('data-emoji'));
        ev.dataTransfer.setData("name", ev.target.getAttribute('data-name'));
    }

    function drop(ev, index) {
        ev.preventDefault();
        const emoji = ev.dataTransfer.getData("emoji");
        const name = ev.dataTransfer.getData("name");
        
        // Save to Storage
        let savedLayout = JSON.parse(localStorage.getItem('gardenGridLayout')) || {};
        savedLayout[index] = { emoji, name };
        localStorage.setItem('gardenGridLayout', JSON.stringify(savedLayout));
        
        // Update UI
        const spot = document.getElementById(`spot-${index}`);
        spot.innerText = emoji;
        spot.classList.add('occupied');
        spot.title = name;
    }

    function clearGrid() {
        if (confirm("Reset the entire grid?")) {
            localStorage.removeItem('gardenGridLayout');
            gridContainer.innerHTML = "";
            createGrid();
        }
    }

    window.onload = createGrid;
</script>

</body>
</html>

</body>
</html>
