<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden Map | Seed Bin</title>
    <style>
        :root { 
            --leaf: #4f772d; --dark: #31572c; --dirt: #604d3f; 
            --grass: #aacc00; --wood: #bc8a5f; --seed: #e9c46a;
        }
        
        body { font-family: 'Segoe UI', sans-serif; background: #e9edc9; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* SIDEBAR SEED BIN */
        #seedBin {
            width: 250px; background: white; padding: 20px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1); z-index: 10;
        }
        .seed-card {
            background: var(--seed); padding: 12px; border-radius: 8px;
            margin-bottom: 10px; cursor: grab; font-weight: bold;
            color: #5d4a1e; border: 2px solid transparent; transition: 0.2s;
            text-align: center;
        }
        .seed-card:active { cursor: grabbing; border-color: var(--dark); }

        /* MAIN GARDEN AREA */
        .main-view { flex-grow: 1; padding: 40px; position: relative; }
        header { display: flex; justify-content: space-between; margin-bottom: 20px; }

        .garden-plot {
            position: relative; width: 100%; height: 600px;
            background-color: var(--grass); border: 12px solid var(--wood);
            border-radius: 20px; overflow: hidden;
            background-image: radial-gradient(var(--dark) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .bed {
            position: absolute; background: var(--dirt); border: 4px solid #4e3b31;
            border-radius: 6px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: white;
            text-align: center; transition: 0.3s; padding: 10px; box-sizing: border-box;
        }
        .bed.drag-over { background: var(--leaf); transform: scale(1.05); }

        .bed small { font-size: 0.7rem; opacity: 0.8; margin-top: 5px; }

        /* POSITIONS */
        .bed-a { top: 50px; left: 50px; width: 200px; height: 150px; }
        .bed-b { top: 250px; left: 50px; width: 200px; height: 150px; }
        .bed-c { top: 50px; right: 50px; width: 150px; height: 450px; }
    </style>
</head>
<body>

<div id="seedBin">
    <h2 style="color:var(--dark)">üß∫ Seed Bin</h2>
    <p style="font-size: 0.8rem; color: #666;">Drag a crop onto a bed to plant it.</p>
    
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-crop="Tomato" data-dtm="75">üçÖ Tomato</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-crop="Kale" data-dtm="50">ü•¨ Kale</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-crop="Carrot" data-dtm="70">ü•ï Carrot</div>
    <div class="seed-card" draggable="true" ondragstart="drag(event)" data-crop="Zucchini" data-dtm="55">ü•í Zucchini</div>
    
    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
    <button onclick="clearMap()" style="width:100%; padding:10px; cursor:pointer; background:#eee; border:none; border-radius:5px;">Clear Map</button>
</div>

<div class="main-view">
    <header>
        <h1 style="margin:0; color:var(--dark)">üó∫Ô∏è Visual Planner</h1>
        <a href="index.html" style="text-decoration:none; color:var(--leaf); font-weight:bold;">üè† Dashboard</a>
    </header>

    <div class="garden-plot">
        <div class="bed bed-a" ondrop="drop(event, 'bedA')" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">Bed A</div>
        <div class="bed bed-b" ondrop="drop(event, 'bedB')" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">Bed B</div>
        <div class="bed bed-c" ondrop="drop(event, 'bedC')" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">Bed C</div>
    </div>
</div>

<script>
    function allowDrop(ev) {
        ev.preventDefault();
        ev.target.classList.add('drag-over');
    }

    function dragLeave(ev) {
        ev.target.classList.remove('drag-over');
    }

    function drag(ev) {
        ev.dataTransfer.setData("crop", ev.target.getAttribute('data-crop'));
        ev.dataTransfer.setData("dtm", ev.target.getAttribute('data-dtm'));
    }

    function drop(ev, bedId) {
        ev.preventDefault();
        ev.target.classList.remove('drag-over');
        
        const crop = ev.dataTransfer.getData("crop");
        const dtm = parseInt(ev.dataTransfer.getData("dtm"));
        
        // Calculate Harvest Date
        const today = new Date();
        const harvestDate = new Date();
        harvestDate.setDate(today.getDate() + dtm);
        
        const dateString = harvestDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });

        // Save to LocalStorage
        let mapData = JSON.parse(localStorage.getItem('mapData')) || {};
        mapData[bedId] = { crop, harvestDate: dateString };
        localStorage.setItem('mapData', JSON.stringify(mapData));

        renderMap();
    }

    function renderMap() {
        const mapData = JSON.parse(localStorage.getItem('mapData')) || {};
        const beds = {
            'bedA': document.querySelector('.bed-a'),
            'bedB': document.querySelector('.bed-b'),
            'bedC': document.querySelector('.bed-c')
        };

        for (let id in beds) {
            if (mapData[id]) {
                beds[id].innerHTML = `<strong>${mapData[id].crop}</strong><small>Harvest: ${mapData[id].harvestDate}</small>`;
                beds[id].style.background = "var(--dark)";
            } else {
                beds[id].innerHTML = id.replace('bed', 'Bed ');
                beds[id].style.background = "var(--dirt)";
            }
        }
    }

    function clearMap() {
        if(confirm("Empty all beds?")) {
            localStorage.removeItem('mapData');
            renderMap();
        }
    }

    window.onload = renderMap;
</script>

</body>
</html>

</body>
</html>
