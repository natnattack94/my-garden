<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Garden Map</title>
    <style>
        :root { 
            --leaf: #4f772d; --dark: #31572c; --dirt: #604d3f; 
            --grass: #aacc00; --wood: #bc8a5f; --cream: #f8f9fa;
        }
        
        body { font-family: 'Segoe UI', sans-serif; background-color: #e9edc9; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        /* GARDEN CANVAS */
        .garden-plot {
            position: relative; width: 100%; height: 500px; background-color: var(--grass);
            border: 10px solid var(--wood); border-radius: 15px; overflow: hidden;
        }

        /* BED STYLING */
        .bed {
            position: absolute; background: var(--dirt); border: 3px solid #4e3b31;
            border-radius: 4px; cursor: pointer; transition: 0.2s;
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold; font-size: 0.8rem;
        }
        .bed:hover { filter: brightness(1.2); transform: scale(1.02); }

        /* THE MODAL (EDIT WINDOW) */
        #editModal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 25px; border-radius: 15px; box-shadow: 0 0 50px rgba(0,0,0,0.3);
            z-index: 1000; width: 300px;
        }
        #modalOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; }
        
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn-save { background: var(--dark); color: white; border: none; padding: 10px; width: 100%; border-radius: 5px; cursor: pointer; }

        /* BED POSITIONS */
        .bed-a { top: 50px; left: 50px; width: 250px; height: 120px; }
        .bed-b { top: 220px; left: 50px; width: 250px; height: 120px; }
        .bed-c { top: 50px; right: 50px; width: 120px; height: 350px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 style="margin:0; color:var(--dark)">üó∫Ô∏è Click Beds to Edit</h1>
        <a href="index.html" style="text-decoration:none; color:var(--leaf); font-weight:bold;">üè† Dashboard</a>
    </header>

    <div class="garden-plot">
        <div class="bed bed-a" onclick="editBed('bedA')">Bed A</div>
        <div class="bed bed-b" onclick="editBed('bedB')">Bed B</div>
        <div class="bed bed-c" onclick="editBed('bedC')">Bed C</div>
    </div>
</div>

<div id="modalOverlay" onclick="closeModal()"></div>
<div id="editModal">
    <h3 id="modalTitle" style="margin-top:0; color:var(--dirt)">Edit Bed</h3>
    <label>What's growing?</label>
    <input type="text" id="plantInput" placeholder="e.g. Cherry Tomatoes">
    <label>Maintenance Notes:</label>
    <textarea id="noteInput" rows="4" placeholder="e.g. Fertilized on 2/22"></textarea>
    <button class="btn-save" onclick="saveBedData()">Update Map</button>
</div>

<script>
    let currentBed = "";

    function editBed(bedId) {
        currentBed = bedId;
        document.getElementById('modalTitle').innerText = "Settings for " + bedId.toUpperCase();
        
        // Load existing data
        const savedData = JSON.parse(localStorage.getItem('mapData')) || {};
        const bedData = savedData[bedId] || { plant: "", note: "" };
        
        document.getElementById('plantInput').value = bedData.plant;
        document.getElementById('noteInput').value = bedData.note;

        document.getElementById('editModal').style.display = "block";
        document.getElementById('modalOverlay').style.display = "block";
    }

    function saveBedData() {
        const plant = document.getElementById('plantInput').value;
        const note = document.getElementById('noteInput').value;

        let savedData = JSON.parse(localStorage.getItem('mapData')) || {};
        savedData[currentBed] = { plant, note };
        
        localStorage.setItem('mapData', JSON.stringify(savedData));
        
        closeModal();
        updateBedVisuals();
    }

    function closeModal() {
        document.getElementById('editModal').style.display = "none";
        document.getElementById('modalOverlay').style.display = "none";
    }

    function updateBedVisuals() {
        const savedData = JSON.parse(localStorage.getItem('mapData')) || {};
        // Update the text inside the beds to show the plant name
        if(savedData.bedA) document.querySelector('.bed-a').innerText = "A: " + savedData.bedA.plant;
        if(savedData.bedB) document.querySelector('.bed-b').innerText = "B: " + savedData.bedB.plant;
        if(savedData.bedC) document.querySelector('.bed-c').innerText = "C: " + savedData.bedC.plant;
    }

    // Load visuals on start
    window.onload = updateBedVisuals;
</script>

</body>
</html>
