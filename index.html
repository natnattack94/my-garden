<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GardenHub OS | 2026</title>
    <style>
        :root { 
            --leaf: #4f772d; --dark: #31572c; --dirt: #604d3f; 
            --cream: #f8f9fa; --seed: #e9c46a; --harvest: #e76f51;
            --sky: #00b4d8; --bg: #e9edc9;
        }
        
        body { 
            font-family: 'Segoe UI', Roboto, sans-serif; 
            background-color: var(--bg); margin: 0; padding: 20px; color: #333;
        }

        .container { 
            max-width: 1000px; margin: auto; background: white; 
            padding: 30px; border-radius: 25px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.1); 
            min-height: 85vh;
        }

        /* HEADER & NAV */
        header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 25px; }
        h1 { margin: 0; color: var(--dark); font-size: 2.2rem; }
        
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { text-decoration: none; color: var(--leaf); font-weight: bold; font-size: 1rem; transition: 0.3s; }
        .nav-links a:hover { color: var(--harvest); }

        /* LIVE STAT CARDS */
        .stat-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        .stat-card {
            background: var(--cream); padding: 20px; border-radius: 18px;
            text-align: center; border: 1px solid #eee; transition: 0.3s;
        }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .stat-card h3 { margin: 0; font-size: 1.8rem; color: var(--dark); }
        .stat-card p { margin: 5px 0 0; color: #888; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }

        /* TAB SYSTEM */
        .tab-bar { 
            display: flex; gap: 10px; background: #f0f2f0; 
            padding: 7px; border-radius: 15px; margin-bottom: 25px;
        }
        .tab-btn { 
            flex: 1; padding: 14px; border: none; border-radius: 10px;
            background: none; cursor: pointer; font-weight: bold;
            color: #777; transition: 0.3s;
        }
        .tab-btn.active { background: white; color: var(--dark); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }

        .tab-content { display: none; animation: slideUp 0.4s ease forwards; }
        .tab-content.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* CONTENT STYLING */
        section { background: var(--cream); padding: 25px; border-radius: 20px; margin-bottom: 20px; }
        .task-item { 
            display: flex; align-items: center; gap: 15px; background: white; 
            padding: 15px; border-radius: 12px; margin-bottom: 10px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }
        
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; color: #999; font-size: 0.8rem; padding: 10px; text-transform: uppercase; }
        td { padding: 15px 10px; border-top: 1px solid #eee; font-size: 0.95rem; }

        .btn-action { 
            background: var(--dark); color: white; border: none; padding: 15px 25px; 
            border-radius: 12px; cursor: pointer; font-weight: bold; width: 100%;
        }

        input[type="text"], input[type="date"], textarea {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; margin-top: 8px; box-sizing: border-box;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div>
            <h1>GardenHub OS</h1>
            <div style="color: var(--dirt); font-weight: 500;">Welcome back, Head Gardener</div>
        </div>
        <nav class="nav-links">
            <a href="map.html">üó∫Ô∏è Visual Map</a>
            <a href="#" onclick="location.reload()">üîÑ Sync Data</a>
        </nav>
    </header>

    <div class="stat-grid">
        <div class="stat-card" style="border-top: 5px solid var(--leaf);">
            <h3 id="stat-planted">0</h3>
            <p>Squares Occupied</p>
        </div>
        <div class="stat-card" style="border-top: 5px solid var(--harvest);">
            <h3 id="stat-harvest">0</h3>
            <p>Total Harvests</p>
        </div>
        <div class="stat-card" style="border-top: 5px solid var(--sky);">
            <h3 id="stat-temp">--¬∞F</h3>
            <p>Local Temp</p>
        </div>
    </div>

    <div class="tab-bar">
        <button class="tab-btn active" onclick="openTab(event, 'chores')">Daily Tasks</button>
        <button class="tab-btn" onclick="openTab(event, 'planner')">Seed Planning</button>
        <button class="tab-btn" onclick="event, openTab(event, 'logs')">Harvest Logs</button>
        <button class="tab-btn" onclick="openTab(event, 'notes')">Journal</button>
    </div>

    <div id="chores" class="tab-content active">
        <section>
            <h2 style="margin-top:0">üìã Priority Tasks</h2>
            <div class="task-item"><input type="checkbox"> <span>Water seedlings in Bed A</span></div>
            <div class="task-item"><input type="checkbox"> <span>Check for frost damage (Feb 22 Forecast)</span></div>
            <div class="task-item"><input type="checkbox"> <span>Organize seed packets</span></div>
        </section>
        <div class="weather-widget" style="margin-top:20px;">
            <a class="weatherwidget-io" href="https://forecast7.com/en/41_76n72_67/hartford/" data-label_1="GARDEN" data-label_2="WEATHER" data-theme="pure" >WEATHER</a>
        </div>
    </div>

    <div id="planner" class="tab-content">
        <section>
            <h2>üßÆ Sowing Calculator</h2>
            <p style="font-size: 0.85rem; color: #666;">Set your frost date to see when to start seeds.</p>
            <input type="date" id="frostDate" onchange="runCalculator()">
            <table id="calcTable" style="display:none">
                <thead><tr><th>Variety</th><th>Sow Window</th></tr></thead>
                <tbody id="calcBody"></tbody>
            </table>
        </section>
    </div>

    <div id="logs" class="tab-content">
        <section>
            <h2>üß∫ Log a Harvest</h2>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <input type="text" id="hCrop" placeholder="What did you pick?">
                <input type="text" id="hAmt" placeholder="How much? (lbs/qty)">
            </div>
            <button class="btn-action" style="background: var(--harvest); margin-top:15px;" onclick="addHarvest()">Add to Records</button>
            <table id="hTable">
                <thead><tr><th>Crop</th><th>Amount</th><th>Date</th></tr></thead>
                <tbody id="hBody"></tbody>
            </table>
        </section>
    </div>

    <div id="notes" class="tab-content">
        <section>
            <h2>üìù Seasonal Observations</h2>
            <textarea id="gardenNotes" rows="12" placeholder="Write about today's weather, pest sightings, or soil prep..."></textarea>
            <button class="btn-action" style="margin-top:15px;" onclick="saveNotes()">Save Journal Entry</button>
        </section>
    </div>

</div>

<script>
    // 1. TAB SYSTEM
    function openTab(evt, tabName) {
        let contents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < contents.length; i++) contents[i].classList.remove("active");
        let tabs = document.getElementsByClassName("tab-btn");
        for (let i = 0; i < tabs.length; i++) tabs[i].classList.remove("active");
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    // 2. AUTO-SYNC LOGIC (Links to Map)
    function syncStats() {
        // Count occupied squares from Map data
        const mapData = JSON.parse(localStorage.getItem('gardenGridLayout')) || {};
        const occupiedCount = Object.keys(mapData).length;
        document.getElementById('stat-planted').innerText = occupiedCount;

        // Count Harvests
        const harvests = JSON.parse(localStorage.getItem('harvestLogs')) || [];
        document.getElementById('stat-harvest').innerText = harvests.length;
    }

    // 3. HARVEST LOGIC
    function addHarvest() {
        const crop = document.getElementById('hCrop').value;
        const amt = document.getElementById('hAmt').value;
        if(!crop || !amt) return;

        let logs = JSON.parse(localStorage.getItem('harvestLogs')) || [];
        logs.push({ crop, amt, date: new Date().toLocaleDateString() });
        localStorage.setItem('harvestLogs', JSON.stringify(logs));
        
        renderHarvests();
        syncStats();
        document.getElementById('hCrop').value = ""; document.getElementById('hAmt').value = "";
    }

    function renderHarvests() {
        const logs = JSON.parse(localStorage.getItem('harvestLogs')) || [];
        document.getElementById('hBody').innerHTML = logs.map(l => 
            `<tr><td>${l.crop}</td><td>${l.amt}</td><td>${l.date}</td></tr>`
        ).reverse().join('');
    }

    // 4. PLANNER LOGIC
    function runCalculator() {
        const frostVal = document.getElementById('frostDate').value;
        if(!frostVal) return;
        localStorage.setItem('frostDate', frostVal);
        const frostDate = new Date(frostVal);
        const plants = [{n:"Peppers", w:10}, {n:"Tomatoes", w:8}, {n:"Lettuce", w:4}, {n:"Cucumber", w:3}];
        
        document.getElementById('calcTable').style.display = "table";
        document.getElementById('calcBody').innerHTML = plants.map(p => {
            let d = new Date(frostDate);
            d.setDate(frostDate.getDate() - (p.w * 7));
            return `<tr><td>${p.n}</td><td><strong>${d.toLocaleDateString()}</strong> <small>(${p.w} wks early)</small></td></tr>`;
        }).join('');
    }

    function saveNotes() {
        localStorage.setItem('gardenNotes', document.getElementById('gardenNotes').value);
        alert("Journal entry saved!");
    }

    // INITIALIZE
    window.onload = () => {
        document.getElementById('gardenNotes').value = localStorage.getItem('gardenNotes') || "";
        document.getElementById('frostDate').value = localStorage.getItem('frostDate') || "";
        renderHarvests();
        runCalculator();
        syncStats();
    };

    // Weather Widget
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
</script>

</body>
</html>

</body>
</html>
