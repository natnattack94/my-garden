<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My 2026 Garden Hub</title>
    <style>
        :root { 
            --leaf: #4f772d; 
            --dark: #31572c; 
            --dirt: #604d3f; 
            --cream: #f8f9fa; 
            --sky: #00b4d8; 
            --seed: #e9c46a; 
            --harvest: #e76f51;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #e9edc9; 
            margin: 0; 
            padding: 15px; 
            line-height: 1.6;
            color: #333;
        }

        .container { 
            max-width: 1000px; 
            margin: auto; 
            background: white; 
            padding: 25px; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
        }
        
        header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 2px solid var(--leaf); 
            margin-bottom: 20px; 
            flex-wrap: wrap; 
            padding-bottom: 15px;
        }

        h1 { color: var(--dark); margin: 0; font-size: 2rem; }

        nav { margin-bottom: 20px; padding: 10px 0; border-bottom: 1px solid #eee; }
        nav a { margin-right: 15px; font-weight: bold; color: var(--leaf); text-decoration: none; }
        nav a:hover { color: var(--dark); text-decoration: underline; }

        .weather-container { 
            min-width: 280px; 
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
        }

        .grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
            margin-bottom: 20px;
        }

        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }

        section { 
            background: var(--cream); 
            padding: 20px; 
            border-radius: 8px; 
            border-left: 6px solid var(--leaf); 
            margin-bottom: 20px;
            box-sizing: border-box;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        h2 { font-size: 1.25rem; color: var(--dirt); margin-top: 0; display: flex; align-items: center; gap: 10px; }

        /* Harvest Tracker Styling */
        .harvest-section { border-left-color: var(--harvest); }
        .harvest-form { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .harvest-form input { padding: 10px; border: 1px solid #ddd; border-radius: 5px; flex: 1; min-width: 120px; }
        .add-btn { background: var(--harvest); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .add-btn:hover { background: #cf5d40; }

        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 10px; 
            background: white; 
            font-size: 0.9rem;
            border-radius: 8px;
            overflow: hidden;
        }
        th { background: var(--leaf); color: white; padding: 12px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #eee; }

        /* Gallery Styling */
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px; margin-top: 10px; }
        .gallery-item { background: #eee; border-radius: 8px; overflow: hidden; height: 130px; position: relative; border: 3px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; }
        .gallery-item span { position: absolute; bottom: 0; background: rgba(49, 87, 44, 0.85); color: white; width: 100%; font-size: 0.75rem; padding: 4px 0; text-align: center; }

        /* General UI */
        .task-list { list-style: none; padding: 0; margin: 0; }
        .task-list li { background: white; margin-bottom: 8px; padding: 10px; border-radius: 6px; display: flex; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        textarea { width: 100%; height: 150px; border: 1px solid #ccc; border-radius: 8px; padding: 15px; box-sizing: border-box; font-family: inherit; font-size: 1rem; resize: vertical; }
        .save-btn { background: var(--dark); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; font-weight: bold; }
        .save-btn:hover { background: var(--leaf); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div>
            <h1>üå± My Garden Hub</h1>
            <p style="margin:0; color: var(--dirt);">Logged in as <strong>Personal Admin</strong></p>
        </div>
        <div class="weather-container">
            <a class="weatherwidget-io" href="https://forecast7.com/en/41_76n72_67/hartford/" data-label_1="GARDEN" data-label_2="WEATHER" data-theme="pure" >WEATHER</a>
            <script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
            </script>
        </div>
    </header>

    <nav>
        <a href="index.html">üè† Dashboard</a>
        <a href="map.html">üó∫Ô∏è Garden Map</a>
    </nav>

    <section class="harvest-section">
        <h2>üß∫ Harvest Log</h2>
        <div class="harvest-form">
            <input type="date" id="harvestDate">
            <input type="text" id="harvestCrop" placeholder="What did you pick?">
            <input type="text" id="harvestWeight" placeholder="How much? (e.g. 5lbs)">
            <button class="add-btn" onclick="addHarvest()">Add Entry</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Crop</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody id="harvestBody">
                </tbody>
        </table>
        <button onclick="clearHarvests()" style="background:none; border:none; color:#999; font-size:0.7rem; cursor:pointer; margin-top:10px;">Clear all harvests</button>
    </section>

    <section style="border-left-color: var(--seed);">
        <h2>üßÆ Seed Starting Calculator</h2>
        <div style="background:white; padding:15px; border-radius:8px; border:1px solid #ddd; margin-bottom:15px;">
            <label><strong>Last Spring Frost Date:</strong></label>
            <input type="date" id="frostDate" style="padding:10px; width:100%; margin-top:5px;" onchange="calculateDates()">
        </div>
        <table id="calcTable" style="display:none;">
            <thead>
                <tr><th>Plant</th><th>Weeks Before</th><th>Sow Date</th></tr>
            </thead>
            <tbody id="calcBody"></tbody>
        </table>
    </section>

    <div class="grid">
        <section>
            <h2>‚úÖ Priority Chores</h2>
            <ul class="task-list">
                <li><input type="checkbox"> Check irrigation lines</li>
                <li><input type="checkbox"> Fertilize heavy feeders</li>
                <li><input type="checkbox"> Stake the tomatoes</li>
                <li><input type="checkbox"> Weed the garlic bed</li>
            </ul>
        </section>

        <section>
            <h2>üì∏ Monthly Progress</h2>
            <div class="gallery">
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1523348837708-15d4a09cfac2?auto=format&fit=crop&w=300" alt="Prep">
                    <span>March: Prep</span>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1591857177580-dc82b9ac4e1e?auto=format&fit=crop&w=300" alt="Sprouts">
                    <span>April: Sprouts</span>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1466692476868-aef1dfb1e735?auto=format&fit=crop&w=300" alt="Garden">
                    <span>May: Growth</span>
                </div>
            </div>
        </section>
    </div>

    <section>
        <h2>üìù Seasonal Observations</h2>
        <textarea id="gardenNotes" placeholder="Record your observations here..."></textarea>
        <button class="save-btn" onclick="saveAll()">Save Hub Data</button>
        <p id="status" style="text-align: center; color: var(--dark); font-weight: bold;"></p>
    </section>
</div>

<script>
    // 1. DATA LOADING ON START
    window.onload = function() {
        // Load Notes
        document.getElementById('gardenNotes').value = localStorage.getItem('gardenNotes') || "";
        
        // Load Frost Date
        const savedFrost = localStorage.getItem('frostDate');
        if (savedFrost) {
            document.getElementById('frostDate').value = savedFrost;
            calculateDates();
        }

        // Load Harvests
        renderHarvests();
    };

    // 2. SEED CALCULATOR LOGIC
    const plants = [
        { name: "Peppers", wks: 10 },
        { name: "Tomatoes", wks: 8 },
        { name: "Lettuce", wks: 4 },
        { name: "Squash", wks: 2 }
    ];

    function calculateDates() {
        const frostVal = document.getElementById('frostDate').value;
        if (!frostVal) return;
        const frostDate = new Date(frostVal);
        const tbody = document.getElementById('calcBody');
        const table = document.getElementById('calcTable');
        
        tbody.innerHTML = "";
        table.style.display = "table";

        plants.forEach(p => {
            let sowDate = new Date(frostDate);
            sowDate.setDate(frostDate.getDate() - (p.wks * 7));
            tbody.innerHTML += `<tr><td>${p.name}</td><td>${p.wks} wks</td><td>${sowDate.toDateString()}</td></tr>`;
        });
    }

    // 3. HARVEST LOG LOGIC
    function addHarvest() {
        const date = document.getElementById('harvestDate').value;
        const crop = document.getElementById('harvestCrop').value;
        const weight = document.getElementById('harvestWeight').value;

        if (!date || !crop || !weight) return alert("Fill out all harvest fields!");

        const harvestList = JSON.parse(localStorage.getItem('harvestList')) || [];
        harvestList.push({ date, crop, weight });
        localStorage.setItem('harvestList', JSON.stringify(harvestList));
        
        renderHarvests();
        document.getElementById('harvestCrop').value = "";
        document.getElementById('harvestWeight').value = "";
    }

    function renderHarvests() {
        const harvestList = JSON.parse(localStorage.getItem('harvestList')) || [];
        const tbody = document.getElementById('harvestBody');
        tbody.innerHTML = harvestList.map(h => `
            <tr>
                <td>${h.date}</td>
                <td>${h.crop}</td>
                <td>${h.weight}</td>
            </tr>
        `).reverse().join('');
    }

    function clearHarvests() {
        if(confirm("Clear all harvest entries?")) {
            localStorage.removeItem('harvestList');
            renderHarvests();
        }
    }

    // 4. GLOBAL SAVE
    function saveAll() {
        localStorage.setItem('gardenNotes', document.getElementById('gardenNotes').value);
        localStorage.setItem('frostDate', document.getElementById('frostDate').value);
        
        const status = document.getElementById('status');
        status.innerText = "‚úì Dashboard Saved!";
        setTimeout(() => { status.innerText = ""; }, 3000);
    }
</script>

</body>
</html>
