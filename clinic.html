<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden Clinic | GardenHub Hartford</title>
    <style>
        :root {
            --pest-red: #e76f51;
            --disease-blue: #457b9d;
            --leaf-green: #2a9d8f;
            --bg: #f8fafc;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: var(--bg); 
            margin: 0; 
            padding: 20px; 
            color: #334155;
        }

        header {
            max-width: 1000px;
            margin: 0 auto 30px;
            text-align: center;
        }

        .search-container {
            max-width: 600px;
            margin: 0 auto 40px;
            position: relative;
        }

        #clinicSearch {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1rem;
            border-radius: 50px;
            border: 2px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            outline: none;
            transition: border-color 0.2s;
        }

        #clinicSearch:focus {
            border-color: var(--leaf-green);
        }

        .clinic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            position: relative;
            transition: transform 0.2s;
            border-top: 8px solid #ddd;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card.pest { border-top-color: var(--pest-red); }
        .card.disease { border-top-color: var(--disease-blue); }

        .type-badge {
            position: absolute;
            top: -15px;
            right: 20px;
            padding: 4px 12px;
            border-radius: 20px;
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .pest .type-badge { background: var(--pest-red); }
        .disease .type-badge { background: var(--disease-blue); }

        h3 { margin-top: 10px; color: #1e293b; }
        
        .section-label {
            font-weight: bold;
            font-size: 0.85rem;
            color: #64748b;
            margin-bottom: 4px;
            display: block;
            text-transform: uppercase;
        }

        .info-block { margin-bottom: 15px; }

        .fix-box {
            background: #f0fdfa;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--leaf-green);
            font-size: 0.95rem;
        }

        .peak-season {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            color: #94a3b8;
            margin-top: 15px;
        }

        .back-nav {
            margin-bottom: 20px;
            display: inline-block;
            text-decoration: none;
            color: var(--leaf-green);
            font-weight: bold;
        }
    </style>
</head>
<body>

<header>
    <a href="map.html" class="back-nav">‚Üê Back to Garden Map</a>
    <h1>üè• Hartford Garden Clinic</h1>
    <p>Identify, Treat, and Prevent common Zone 6B garden issues.</p>
</header>

<div class="search-container">
    <input type="text" id="clinicSearch" placeholder="Search by plant (Tomato) or symptom (Yellow)...">
</div>

<div class="clinic-grid" id="clinicGrid">
    </div>

<script>
    const CLINIC_DB = [
        {
            name: "Tomato Hornworm",
            type: "pest",
            target: "Tomato, Pepper",
            symptoms: "Large holes in leaves, missing stems, dark green droppings on foliage.",
            fix: "Hand-pick caterpillars (check under leaves) or use Bacillus thuringiensis (Bt) spray.",
            peak: "July - August"
        },
        {
            name: "Aphids",
            type: "pest",
            target: "Lettuce, Broccoli, Kale",
            symptoms: "Tiny green/black bugs on undersides of leaves, sticky residue, curling growth.",
            fix: "Blast plants with a strong stream of water or use insecticidal soap/Neem oil.",
            peak: "May - June & September"
        },
        {
            name: "Early Blight",
            type: "disease",
            target: "Tomato, Potato",
            symptoms: "Brown spots on older leaves with 'target' ring patterns. Yellowing halos.",
            fix: "Prune lower branches to prevent soil splash. Use copper-based fungicide if severe.",
            peak: "July (After heavy rain)"
        },
        {
            name: "Powdery Mildew",
            type: "disease",
            target: "Zucchini, Squash, Broccoli",
            symptoms: "White, flour-like dust covering leaves. Stunted growth.",
            fix: "Mix 1 part milk with 9 parts water; spray on leaves in direct sunlight. Improve airflow.",
            peak: "August - September"
        },
        {
            name: "Cabbage Looper",
            type: "pest",
            target: "Broccoli, Kale, Lettuce",
            symptoms: "Small ragged holes in leaves; light green 'inching' caterpillars.",
            fix: "Cover crops with floating row covers or apply organic Bt spray.",
            peak: "June - August"
        },
        {
            name: "Septoria Leaf Spot",
            type: "disease",
            target: "Tomato",
            symptoms: "Numerous small circular spots with dark borders and grey centers.",
            fix: "Avoid overhead watering. Remove infected bottom leaves immediately.",
            peak: "June - August (High Humidity)"
        }
    ];

    const clinicGrid = document.getElementById('clinicGrid');
    const searchInput = document.getElementById('clinicSearch');

    function displayIssues(filter = "") {
        clinicGrid.innerHTML = "";
        
        const filteredData = CLINIC_DB.filter(item => 
            item.name.toLowerCase().includes(filter.toLowerCase()) ||
            item.target.toLowerCase().includes(filter.toLowerCase()) ||
            item.symptoms.toLowerCase().includes(filter.toLowerCase())
        );

        filteredData.forEach(issue => {
            const card = document.createElement('div');
            card.className = `card ${issue.type}`;
            
            card.innerHTML = `
                <div class="type-badge">${issue.type}</div>
                <h3>${issue.name}</h3>
                
                <div class="info-block">
                    <span class="section-label">Common Targets</span>
                    <div>${issue.target}</div>
                </div>

                <div class="info-block">
                    <span class="section-label">Symptoms</span>
                    <div>${issue.symptoms}</div>
                </div>

                <div class="fix-box">
                    <span class="section-label" style="color: var(--leaf-green)">Organic Solution</span>
                    ${issue.fix}
                </div>

                <div class="peak-season">
                    üìÖ <strong>Peak Hartford Season:</strong> ${issue.peak}
                </div>
            `;
            clinicGrid.appendChild(card);
        });

        if (filteredData.length === 0) {
            clinicGrid.innerHTML = `<p style="text-align:center; grid-column: 1/-1;">No matches found for "${filter}". Try searching for a specific plant like 'Tomato'.</p>`;
        }
    }

    // Search Logic with URL Param support
    searchInput.addEventListener('input', (e) => displayIssues(e.target.value));

    window.onload = () => {
        // Check if we arrived here from the map with a search query
        const urlParams = new URLSearchParams(window.location.search);
        const initialSearch = urlParams.get('search');
        if (initialSearch) {
            searchInput.value = initialSearch;
            displayIssues(initialSearch);
        } else {
            displayIssues();
        }
    };
</script>

</body>
</html>
